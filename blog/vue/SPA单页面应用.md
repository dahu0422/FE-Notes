# SPA 单页面应用

单页面应用（Single Page Application，简称 SPA）：客户端加载一个 HTML 页面后，后续所有交互通过 AJAX 请求数据，动态更新页面内容，而不是重新加载整个页面。

多页面应用（Multi Page Application，简称 MPA）：每个页面都有一个主页面，都是相互独立的页面。当我们访问一个页面时，会加载该页面的所有资源，包括 HTML、CSS、JavaScript 等。当用户点击页面中的链接时，会重新加载该页面的所有资源，而不是只加载新的页面内容。

## 单页面应用的优缺点

### 优点

- 更好的用户体验：当页面内容发生变化不需要重新加载整个页面，减少了页面切换切换时的“闪烁”，是用户界面的过渡更加平滑。
- 减少服务器压力：服务器只需要处理 API 请求，返回数据，而不必须处理页面渲染，可以显著降低服务器的压力
- 路由管理：单页面应用路由通常有前端管理，多页面路由由后端管理。

### 缺点

- SEO 问题：由于内容是通过 JavaScript 动态加载的，搜索引擎可能无法有效地索引 SPA 的内容。
- 首屏渲染较慢：单页面应用首次加载需要下载整个应用框架，会导致首次加载速度偏慢。

## 首屏渲染优化

### 减小文件入口的体积

通过**路由懒加载**把不同路由对应的组件分割成不同的代码块，当路由被访问是才会加载对应的组件。

### 静态资源缓存

通过设置 HTTP 头，如 `Cache-Control`、`Expires` 等，让浏览器缓存静态资源，下次请求时直接从缓存中读取，从而减少请求次数，提高页面加载速度。

### 组件重复打包

假设 `A.js` 文件是一个常用的库，现在有多个路由使用了 `A.js` 文件，这就造成了重复下载。

解决方案：在 `webpack` 的 `config` 文件中，修改 `CommonsChunkPlugin` 的配置，`minChunks: 3`：使用 3 次及以上的模块单独抽离出来，放进公共依赖，避免重复加载组件。

### 图片资源处理

图片资源虽然不在编码过程中，但对页面性能有很大影响。压缩、懒加载、雪碧图、分页加载都是处理图片资源的方式

<!-- TODO: -->
